<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Java Web 程序设计</title>
    <link href="../css/login.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!--&lt;!&ndash; 顶部标题容器 &ndash;&gt;-->
<!--<div class="header">-->
<!--    <h3>请填写注册信息</h3>-->
<!--</div>-->
<div class="login-container">
    <h2 class="login-title">用户登录</h2>

    <div class="error-message" id="errorMessage"></div>

    <form id="loginForm" action="/Login" method="post">
        <!-- 隐藏字段，存储登录后跳转的目标页面 -->
        <input name="redirect" id="redirectInput" value="" hidden="hidden">
        <input name="productId" id="productIdInput" value="" hidden="hidden">

        <div class="form-group">
            <label for="username">用户名</label>
            <input type="text" id="username" name="username" required placeholder="请输入用户名">
        </div>

        <div class="form-group">
            <label for="password">密码</label>
            <input type="password" id="password" name="password" required placeholder="请输入密码">
        </div>

        <div class="form-group">
            <label>用户类型</label>
            <div class="user-type">
                <label>
                    <input type="radio" name="usertype" value="user" checked> 普通用户
                </label>
                <label>
                    <input type="radio" name="usertype" value="admin"> 管理员
                </label>
            </div>
        </div>

        <button type="submit">登录</button>

        <div class="register-link">
            还没有账号？<a href="register.html">立即注册</a>
        </div>
    </form>
</div>
</body>
</html>
<script>
    // 获取URL参数
    function getUrlParams() {
        const params = {};
        const queryString = window.location.search.substring(1);
        const paramPairs = queryString.split('&');

        for (const pair of paramPairs) {
            const [key, value] = pair.split('=');
            if (key) {
                params[key] = decodeURIComponent(value || '');
            }
        }
        return params;
    }

    // 页面加载时初始化表单
    document.addEventListener('DOMContentLoaded', () => {
        const params = getUrlParams();

        // 设置跳转目标
        if (params.redirect) {
            document.getElementById('redirectInput').value = params.redirect;
        }

        // 设置商品ID
        if (params.productId) {
            document.getElementById('productIdInput').value = params.productId;
        }

        // 显示错误信息
        if (params.error) {
            const errorElement = document.getElementById('errorMessage');
            errorElement.textContent = params.error;
            errorElement.style.display = 'block';
        }
    });
</script>